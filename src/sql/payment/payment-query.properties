insertPayment=INSERT INTO LESSON_PAYMENT VALUES(LESSON_PAYMENT_SEQ.NEXTVAL, ?, ?, ?, ?, ?, ?, ?, ?, ?)
selectList=SELECT P.PAYMENT_PK, LESSON_NAME, MEMBER_NAME, MEMBER_PHONE, TOTAL_COSTS, PAYMENT_COSTS, POINTS_USED, PAYMENT_IMP_NUM, PAYMENT_DATE FROM LESSON_PAYMENT P JOIN LESSON_SCHEDULE LS ON (P.LESSON_SCHEDULE_PK = LS.SCHEDULE_PK) JOIN LESSON L ON (LS.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (P.MEMBER_PK = M.MEMBER_PK) ORDER BY PAYMENT_DATE DESC
updateCount=UPDATE LESSON_ORDER SET LISTENERS = LISTENERS + 1 WHERE SCHEDULE_PK = (SELECT LESSON_SCHEDULE_PK FROM LESSON_PAYMENT WHERE PAYMENT_IMP_NUM = ?)
insertRegister=INSERT INTO LESSON_REGISTER VALUES ((SELECT LESSON_SCHEDULE_PK FROM LESSON_PAYMENT WHERE PAYMENT_IMP_NUM = ?),(SELECT MEMBER_PK FROM LESSON_PAYMENT WHERE PAYMENT_IMP_NUM = ?) ,DEFAULT)
showPayView=SELECT LS.SCHEDULE_PK, L.LESSON_NAME, M.MEMBER_PK, M.ARTIST_NICK, L.TOTAL_ORDERS, COST_PER_ORDER, TOTAL_COSTS, REGION, SUB_REGION, ADDRESS, LESSON_ORDER_START, LESSON_ORDER_END, (SELECT MEMBER_POINT FROM MEMBER WHERE MEMBER_PK = ?) AS MEMBER_POINT FROM LESSON_SCHEDULE LS JOIN LESSON_ORDER LO ON (LS.SCHEDULE_PK = LO.SCHEDULE_PK) JOIN LESSON L ON (LS.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (L.ARTIST_PK = M.MEMBER_PK) WHERE LS.SCHEDULE_PK = ?
insertUsingPoint=INSERT INTO MEMBER_POINTS VALUES (MEMBER_POINTS_SEQ.NEXTVAL, ?, ?, ?, 2, ?, (SELECT PAYMENT_PK FROM LESSON_PAYMENT WHERE PAYMENT_IMP_NUM = ?))
insertGivePoint=INSERT INTO MEMBER_POINTS VALUES (MEMBER_POINTS_SEQ.NEXTVAL, ?, ?, ?, 1, ?, (SELECT PAYMENT_PK FROM LESSON_PAYMENT WHERE PAYMENT_IMP_NUM = ?))
updateUsingPoint=UPDATE MEMBER SET MEMBER_POINT = MEMBER_POINT - ? + ? WHERE MEMBER_PK = ?
payList=SELECT LESSON_NAME, (SELECT MEMBER_NAME FROM MEMBER WHERE MEMBER_PK = P.ARTIST_PK) AS ARTIST_NAME, REGION, PAYMENT_DATE, PAYMENT_COSTS, LS.STATUS, CAST(SYSDATE AS TIMESTAMP) AS NOW FROM LESSON_PAYMENT P JOIN LESSON_SCHEDULE LS ON (LS.SCHEDULE_PK = P.LESSON_SCHEDULE_PK) JOIN LESSON L ON (LS.LESSON_PK = L.LESSON_PK) JOIN MEMBER M ON (P.MEMBER_PK = M.MEMBER_PK) WHERE M.MEMBER_PK = ? ORDER BY PAYMENT_DATE DESC
orderList=SELECT MIN(LESSON_ORDER_START) AS FIRST, MAX(LESSON_ORDER_END) AS LAST, PAYMENT_PK FROM LESSON_ORDER LO JOIN LESSON_PAYMENT P ON (P.LESSON_SCHEDULE_PK = LO.SCHEDULE_PK) JOIN MEMBER M ON (M.MEMBER_PK = P.MEMBER_PK) WHERE P.MEMBER_PK = ? GROUP BY PAYMENT_PK ORDER BY PAYMENT_PK DESC